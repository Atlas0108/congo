{% extends "base.html" %}

{% block title %}Product Details - Congo{% endblock %}

{% block content %}
<div id="product-container" class="bg-white rounded-lg shadow-md p-8">
    <p class="text-center text-gray-500">Loading product...</p>
</div>
{% endblock %}

{% block scripts %}
<script>
    const productId = {{ product_id }};
    
    fetch(`/api/products/${productId}`)
        .then(response => response.json())
        .then(product => {
            const container = document.getElementById('product-container');
            container.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <img src="${product.image_url || '/static/images/placeholder.svg'}" alt="${product.name}" class="w-full rounded-lg bg-gray-200" onerror="this.onerror=null; this.src='/static/images/placeholder.svg';">
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold mb-4">${product.name}</h1>
                        <div class="mb-4">
                            <span class="text-3xl font-bold text-gray-900">$${product.price.toFixed(2)}</span>
                            ${product.rating > 0 ? `<div class="mt-2">
                                <span style="color: #004FFF;">â˜…</span>
                                <span>${product.rating.toFixed(1)} (${product.review_count} reviews)</span>
                            </div>` : ''}
                        </div>
                        <p class="text-gray-700 mb-6">${product.description || 'No description available.'}</p>
                        <div class="mb-6">
                            <p class="text-sm text-gray-600 mb-2">Stock: ${product.stock > 0 ? `<span class="text-green-600">In Stock (${product.stock} available)</span>` : '<span class="text-red-600">Out of Stock</span>'}</p>
                            <p class="text-sm text-gray-600">Category: ${product.category || 'Uncategorized'}</p>
                        </div>
                        <button onclick="addToCart(${product.id})" ${product.stock === 0 ? 'disabled' : ''} style="background-color: #004FFF;" class="w-full text-white px-8 py-3 rounded-lg font-semibold hover:opacity-90 transition ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                            ${product.stock > 0 ? 'Add to Cart' : 'Out of Stock'}
                        </button>
                    </div>
                </div>
            `;
        })
        .catch(error => {
            document.getElementById('product-container').innerHTML = '<p class="text-center text-red-500">Product not found.</p>';
        });
</script>
{% endblock %}

